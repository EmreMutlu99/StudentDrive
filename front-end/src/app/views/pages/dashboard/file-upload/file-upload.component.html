<div class="container">
    <div class="card">
      <div class="card-header">
        <h3>File Upload</h3>
      </div>
      <div class="card-body">
        <!-- Alert Messages -->
        <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
          {{ errorMessage }}
        </div>
        <div *ngIf="successMessage" class="alert alert-success" role="alert">
          {{ successMessage }}
        </div>
  
        <!-- Upload Section -->
        <div class="upload-section">
          <div
            class="drop-zone"
            [class.drag-over]="isDragOver"
            (dragover)="onDragOver($event)"
            (dragleave)="onDragLeave($event)"
            (drop)="onFileDrop($event)">
  
            <div class="drop-zone-content">
              <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" class="upload-icon" viewBox="0 0 16 16">
                <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708l3-3z"/>
              </svg>
              <p class="drop-zone-text">Drag and drop file here or</p>
              <label for="fileInput" class="btn btn-primary">Select File</label>
              <input
                type="file"
                id="fileInput"
                (change)="onFileSelected($event)"
                accept=".pdf,.jpg,.jpeg,.png"
                style="display: none;">
              <p class="file-limits">Max 10MB â€¢ PDF, JPEG, PNG</p>
            </div>
          </div>
  
          <!-- Selected File Info -->
          <div *ngIf="selectedFile" class="selected-file">
            <div class="file-info">
              <strong>{{ selectedFile.name }}</strong>
              <span class="file-size">{{ formatSize(selectedFile.size) }}</span>
            </div>
            <button
              class="btn btn-success"
              (click)="uploadFile()"
              [disabled]="isUploading">
              {{ isUploading ? 'Uploading...' : 'Upload' }}
            </button>
          </div>
  
          <!-- Upload Progress -->
          <div *ngIf="isUploading" class="progress">
            <div
              class="progress-bar progress-bar-striped progress-bar-animated"
              role="progressbar"
              [style.width.%]="uploadProgress">
              {{ uploadProgress }}%
            </div>
          </div>
        </div>
  
        <!-- File List -->
        <div class="file-list-section">
          <h4>Your Files</h4>
          <div *ngIf="files.length === 0" class="no-files">
            No files uploaded yet
          </div>
          <div class="table-responsive" *ngIf="files.length > 0">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Filename</th>
                  <th>Size</th>
                  <th>Upload Date</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let file of files">
                  <td>{{ file.original_filename }}</td>
                  <td>{{ formatSize(file.size_bytes) }}</td>
                  <td>{{ file.created_at | date:'short' }}</td>
                  <td>
                    <button
                      class="btn btn-sm btn-info me-2"
                      (click)="downloadFile(file)">
                      Download
                    </button>
                    <button
                      class="btn btn-sm btn-danger"
                      (click)="deleteFile(file)">
                      Delete
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>